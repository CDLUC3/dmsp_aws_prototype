{
  "swagger" : "2.0",
  "info" : {
    "version" : "1.0",
    "title" : "uc3-dmp-hub-dev-regional-lambdas"
  },
  "host" : "api.dmphub-dev.cdlib.org",
  "schemes" : [ "https" ],
  "paths" : {
    "/dmps" : {
      "post" : {
        "description" : "Create DMP metadata",
        "parameters" : [ {
          "name" : "Authorization",
          "in" : "header",
          "description" : "The Cognito access token",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : { },
        "security" : [ {
          "DmpHubCognitoAuthorizer" : [ "https://auth.dmphub-dev.cdlib.org/dev.write" ]
        } ],
        "x-amazon-apigateway-integration" : {
          "type" : "aws_proxy",
          "uri" : "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:671846987296:function:uc3-dmp-hub-dev-regional-lambdas-PostDmpsFunction-f6W0SIq0hncv/invocations",
          "httpMethod" : "POST",
          "passthroughBehavior" : "when_no_match"
        }
      }
    },
    "/dmps/validate" : {
      "post" : {
        "description" : "Validate the DMP metadata",
        "responses" : { },
        "x-amazon-apigateway-integration" : {
          "type" : "aws_proxy",
          "uri" : "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:671846987296:function:uc3-dmp-hub-dev-regional-lambd-ValidateDmpFunction-noE7KU7YIMuS/invocations",
          "httpMethod" : "POST",
          "passthroughBehavior" : "when_no_match"
        }
      }
    },
    "/dmps/{dmp_id+}" : {
      "get" : {
        "description" : "Fetch the DMP metadata",
        "parameters" : [ {
          "name" : "dmp_id",
          "in" : "path",
          "description" : "The DMP ID in either the `doi.org/10.12345/ABC123` or `10.12345/ABC123` formats.",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : { },
        "x-amazon-apigateway-integration" : {
          "type" : "aws_proxy",
          "uri" : "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:671846987296:function:uc3-dmp-hub-dev-regional-lambdas-GetDmpFunction-Ykn7txdFu7DW/invocations",
          "httpMethod" : "POST",
          "passthroughBehavior" : "when_no_match"
        }
      },
      "put" : {
        "description" : "Update the DMP metadata",
        "parameters" : [ {
          "name" : "dmp_id",
          "in" : "path",
          "description" : "The DMP ID in either the `doi.org/10.12345/ABC123` or `10.12345/ABC123` formats.",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "Authorization",
          "in" : "header",
          "description" : "The Cognito access token",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : { },
        "security" : [ {
          "DmpHubCognitoAuthorizer" : [ "https://auth.dmphub-dev.cdlib.org/dev.write" ]
        } ],
        "x-amazon-apigateway-integration" : {
          "type" : "aws_proxy",
          "uri" : "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:671846987296:function:uc3-dmp-hub-dev-regional-lambdas-PutDmpFunction-jwBJ4yiQh1Tn/invocations",
          "httpMethod" : "POST",
          "passthroughBehavior" : "when_no_match"
        }
      },
      "delete" : {
        "description" : "Tombstone the DMP metadata",
        "parameters" : [ {
          "name" : "dmp_id",
          "in" : "path",
          "description" : "The DMP ID in either the `doi.org/10.12345/ABC123` or `10.12345/ABC123` formats.",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "Authorization",
          "in" : "header",
          "description" : "The Cognito access token",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : { },
        "security" : [ {
          "DmpHubCognitoAuthorizer" : [ "https://auth.dmphub-dev.cdlib.org/dev.write" ]
        } ],
        "x-amazon-apigateway-integration" : {
          "type" : "aws_proxy",
          "uri" : "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:671846987296:function:uc3-dmp-hub-dev-regional-lambdas-DeleteDmpFunction-LFHc4wZHhL1W/invocations",
          "httpMethod" : "POST",
          "passthroughBehavior" : "when_no_match"
        }
      }
    }
  },
  "securityDefinitions" : {
    "DmpHubCognitoAuthorizer" : {
      "type" : "apiKey",
      "name" : "Authorization",
      "in" : "header",
      "x-amazon-apigateway-authtype" : "cognito_user_pools",
      "x-amazon-apigateway-authorizer" : {
        "type" : "cognito_user_pools",
        "providerARNs" : [ "arn:aws:cognito-idp:us-west-2:671846987296:userpool/us-west-2_c2lN7xMeS" ]
      }
    }
  },
  "x-amazon-apigateway-documentation" : {
    "version" : "0.3",
    "createdDate" : "2023-02-28T18:39:48Z",
    "documentationParts" : [ {
      "location" : {
        "type" : "API"
      },
      "properties" : {
        "description" : "DMPHub - Metadata Repository for Data Management Plans (DMP)"
      }
    }, {
      "location" : {
        "type" : "AUTHORIZER",
        "name" : "Authorization"
      },
      "properties" : {
        "description" : "Authorizes invocations of configured methods."
      }
    }, {
      "location" : {
        "type" : "METHOD",
        "path" : "/dmps/validate",
        "method" : "POST"
      },
      "properties" : {
        "description" : "Validate the DMP metadata"
      }
    }, {
      "location" : {
        "type" : "METHOD",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE"
      },
      "properties" : {
        "description" : "Tombstone the DMP metadata"
      }
    }, {
      "location" : {
        "type" : "METHOD",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET"
      },
      "properties" : {
        "description" : "Fetch the DMP metadata"
      }
    }, {
      "location" : {
        "type" : "METHOD",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT"
      },
      "properties" : {
        "description" : "Update the DMP metadata"
      }
    }, {
      "location" : {
        "type" : "METHOD",
        "path" : "/dmps",
        "method" : "POST"
      },
      "properties" : {
        "description" : "Create DMP metadata"
      }
    }, {
      "location" : {
        "type" : "PATH_PARAMETER",
        "path" : "/dmps/{dmp_id+}",
        "method" : "*",
        "name" : "dmp_id"
      },
      "properties" : {
        "description" : "The DMP ID in either the `doi.org/10.12345/ABC123` or `10.12345/ABC123` formats."
      }
    }, {
      "location" : {
        "type" : "QUERY_PARAMETER",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET",
        "name" : "version"
      },
      "properties" : {
        "description" : "The specific version of the DMP you want. The default is always the latest version."
      }
    }, {
      "location" : {
        "type" : "REQUEST_BODY",
        "path" : "/dmps/validate",
        "method" : "POST"
      },
      "properties" : {
        "description" : "The DMP metadata as JSON"
      }
    }, {
      "location" : {
        "type" : "REQUEST_BODY",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT"
      },
      "properties" : {
        "description" : "The updated DMP metadata as JSON"
      }
    }, {
      "location" : {
        "type" : "REQUEST_BODY",
        "path" : "/dmps",
        "method" : "POST"
      },
      "properties" : {
        "description" : "The DMP metadata as JSON"
      }
    }, {
      "location" : {
        "type" : "REQUEST_HEADER",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "name" : "Authorization"
      },
      "properties" : {
        "description" : "The Cognito access token"
      }
    }, {
      "location" : {
        "type" : "REQUEST_HEADER",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "name" : "Authorization"
      },
      "properties" : {
        "description" : "The Cognito access token"
      }
    }, {
      "location" : {
        "type" : "REQUEST_HEADER",
        "path" : "/dmps",
        "method" : "POST",
        "name" : "Authorization"
      },
      "properties" : {
        "description" : "The Cognito access token"
      }
    }, {
      "location" : {
        "type" : "RESOURCE",
        "path" : "/dmps/validate"
      },
      "properties" : {
        "description" : "DMP JSON Validator"
      }
    }, {
      "location" : {
        "type" : "RESOURCE",
        "path" : "/dmps/{dmp_id+}"
      },
      "properties" : {
        "description" : "A single DMP"
      }
    }, {
      "location" : {
        "type" : "RESOURCE",
        "path" : "/dmps"
      },
      "properties" : {
        "description" : "Data Management Plans"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/validate",
        "method" : "POST",
        "statusCode" : "200"
      },
      "properties" : {
        "description" : "Valid"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/validate",
        "method" : "POST",
        "statusCode" : "400"
      },
      "properties" : {
        "description" : "Metadata contained errors"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/validate",
        "method" : "POST",
        "statusCode" : "500"
      },
      "properties" : {
        "description" : "Internal server error"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "statusCode" : "200"
      },
      "properties" : {
        "description" : "Success"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "statusCode" : "400"
      },
      "properties" : {
        "description" : "Invalid DMP ID"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "statusCode" : "403"
      },
      "properties" : {
        "description" : "Forbidden"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "statusCode" : "404"
      },
      "properties" : {
        "description" : "DMP ID not found"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "DELETE",
        "statusCode" : "500"
      },
      "properties" : {
        "description" : "Internal server error"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET",
        "statusCode" : "200"
      },
      "properties" : {
        "description" : "Success"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET",
        "statusCode" : "400"
      },
      "properties" : {
        "description" : "Invalid DMP ID"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET",
        "statusCode" : "404"
      },
      "properties" : {
        "description" : "DMP ID not found"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "GET",
        "statusCode" : "500"
      },
      "properties" : {
        "description" : "Internal server error"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "200"
      },
      "properties" : {
        "description" : "Success"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "400"
      },
      "properties" : {
        "description" : "Invalid DMP ID or metadata"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "403"
      },
      "properties" : {
        "description" : "Forbidden"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "404"
      },
      "properties" : {
        "description" : "DMP ID not found"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "405"
      },
      "properties" : {
        "description" : "You cannot update a historical version"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps/{dmp_id+}",
        "method" : "PUT",
        "statusCode" : "500"
      },
      "properties" : {
        "description" : "Internal server error"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps",
        "method" : "POST",
        "statusCode" : "201"
      },
      "properties" : {
        "description" : "Created"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps",
        "method" : "POST",
        "statusCode" : "400"
      },
      "properties" : {
        "description" : "Invalid JSON"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps",
        "method" : "POST",
        "statusCode" : "403"
      },
      "properties" : {
        "description" : "Forbidden"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps",
        "method" : "POST",
        "statusCode" : "405"
      },
      "properties" : {
        "description" : "DMP already exists"
      }
    }, {
      "location" : {
        "type" : "RESPONSE",
        "path" : "/dmps",
        "method" : "POST",
        "statusCode" : "500"
      },
      "properties" : {
        "description" : "Internal Server Error (admins have been notified)"
      }
    } ]
  },
  "x-amazon-apigateway-endpoint-configuration" : {
    "disableExecuteApiEndpoint" : true
  }
}