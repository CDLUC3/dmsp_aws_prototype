template:
  path: 'cloudfront.yaml'
  type: 'file'

dependencies:
  - 'dev/regional/s3.yaml'

parameters:
  Domain: 'dmphub-dev.cdlib.org'

  CertificateArn: !stack_output dev/global/cert.yaml::CertificateArn

  WafArn: !stack_output dev/global/waf.yaml::WafArn

  S3LogBucketId: !stack_output dev/regional/s3.yaml::S3LogBucketId

  S3CloudFrontBucketId: !stack_output dev/regional/s3.yaml::S3CloudFrontBucketId
  S3CloudFrontBucketArn: !stack_output dev/regional/s3.yaml::S3CloudFrontBucketArn

hooks:
  after_create:
    # Call the Bash script that will upload the default HTML page to CloudFront's
    # S3 bucket
    - !cmd './src/cloudfront/upload.sh s3cloudfrontbucket'
